<!DOCTYPE html><html lang="zh-CN" class="mdui-theme-auto"><head><meta charset="utf-8"><title>随身WiFi 控制台 · UZ801</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#1976d2"><link rel="stylesheet" href="css/local-fonts.css"><link href="css/material-icon.css" rel="stylesheet"><link rel="stylesheet" href="css/mdui.min.css"><style>:root{--page-max-width:1320px;--appbar-height:64px;--color-surface:#ffffff;--color-surface-alt:#f5f7fa;--color-border:#00000014;--color-text-primary:#212121;--color-text-secondary:#616161}html.mdui-theme-layout-dark,html.mdui-theme-layout-dark:root{--color-surface:#1e1e1e;--color-surface-alt:#242424;--color-border:#ffffff14;--color-text-primary:#f5f5f5;--color-text-secondary:#bdbdbd}body{font-family:Roboto,"Noto Sans SC","微软雅黑",Arial,sans-serif;background:var(--color-bg);color:var(--color-text-primary)}.layout{max-width:var(--page-max-width);margin:0 auto;padding:16px 16px 64px}.card-section-title{margin:0 0 8px;font-weight:500;letter-spacing:.5px}.signal-bars{display:flex;align-items:flex-end;height:42px;gap:4px}.signal-bar{width:8px;background:#ababab4d;border-radius:2px;position:relative;overflow:hidden}.signal-bar span{position:absolute;bottom:0;left:0;right:0;background:#4caf50;transition:height .35s cubic-bezier(.4,0,.2,1),background .35s}.signal-meta{font-size:12px;color:var(--color-text-secondary);margin-top:4px;line-height:1.3}.device-info-table{width:100%;border-collapse:collapse;font-size:14px}.device-info-table td,.device-info-table th{padding:6px 8px;text-align:left;border-bottom:1px solid var(--color-border)}.device-info-table tr:last-child td,.device-info-table tr:last-child th{border-bottom:none}.device-info-table th{font-weight:500;color:var(--color-text-secondary);width:140px}.chip-group{display:flex;flex-wrap:wrap;gap:8px}.chip-group a{text-decoration:none!important}.footer{text-align:center;font-size:12px;color:#888;padding:32px 0 16px}.mdui-theme-layout-dark .signal-bar{background:#ffffff26}.mdui-theme-layout-dark .signal-meta{color:var(--color-text-secondary)}.section-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;align-items:stretch}@media (max-width:640px){:root{--appbar-height:56px}.section-grid{grid-template-columns:1fr}.mdui-card .flex.space-between{flex-direction:column;align-items:flex-start}.status-pill{margin-top:8px}}.layout{margin-top:8px}.mdui-card{overflow:hidden;background:var(--color-surface);backdrop-filter:saturate(180%) blur(10px)}.mdui-theme-layout-dark .mdui-card{box-shadow:0 2px 6px -2px #00000099,0 4px 12px -2px #00000066}.action-btns{display:flex;flex-wrap:wrap;gap:12px}.action-btns .mdui-btn{flex:1 1 140px;justify-content:flex-start}.divider-title{font-size:12px;font-weight:600;letter-spacing:1px;opacity:.75;margin:8px 0 4px}.lang-toggle{cursor:pointer}iframe.embed-preview{width:100%;border:0;display:block;background:0 0}body{opacity:0;animation:fadeIn .4s ease forwards}@keyframes fadeIn{to{opacity:1}}.top-app-title{font-weight:500}.status-pill{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:999px;font-size:12px;background:#e3f2fd;color:#1565c0;line-height:1}.mdui-theme-layout-dark .status-pill{background:#1a3c5c;color:#bbdefb}.rssi-badge{font-size:11px;padding:2px 6px;border-radius:4px;background:var(--color-surface-alt);color:var(--color-text-secondary);line-height:1.2}.mdui-theme-layout-dark .rssi-badge{background:#2b2b2b}.flex{display:flex}.flex-center{display:flex;align-items:center}.space-between{justify-content:space-between}.wrap{flex-wrap:wrap}.gap8{gap:8px}.mt16{margin-top:16px}.mt8{margin-top:8px}.mb0{margin-bottom:0}.hidden{display:none!important}.download-links a{text-decoration:none}.material-icons{line-height:1!important;display:inline-flex;align-items:center;justify-content:center}.mdui-chip{display:inline-flex;align-items:center}.mdui-chip-icon{display:inline-flex;align-items:center;justify-content:center}.action-btns .material-icons{margin-right:4px}.mdui-toolbar .mdui-btn-icon{width:48px;height:48px;padding:0;display:inline-flex;align-items:center;justify-content:center}.mdui-toolbar .mdui-btn-icon i.material-icons{font-size:24px;line-height:1;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center}@media (min-width:960px){.mdui-toolbar .mdui-btn-icon{width:56px;height:56px}}@media (min-width:960px){:root{--drawer-width:240px}.mdui-drawer{position:fixed;top:calc(var(--appbar-height));left:0;width:var(--drawer-width);height:calc(100vh - var(--appbar-height));transform:none!important;box-shadow:none!important;z-index:3;background:var(--color-surface)}.layout{margin-left:calc(var(--drawer-width) + 16px)}.mdui-toolbar .mdui-btn[mdui-drawer]{display:none!important}.mdui-drawer .mdui-list{padding-top:8px}}.wifi-quick{font-size:13px;background:var(--color-surface-alt);padding:8px 12px;border-radius:8px;display:flex;flex-wrap:wrap;gap:16px;align-items:center;margin-bottom:12px}html.mdui-theme-layout-dark .wifi-quick{background:#2a2a2a}.wifi-quick code{font-family:Consolas,monospace;padding:2px 4px;background:#0000000f;border-radius:4px;font-size:12px}html.mdui-theme-layout-dark .wifi-quick code{background:#ffffff14}.mini-icon-btn{width:32px;height:32px;min-width:32px;padding:0;display:inline-flex;align-items:center;justify-content:center}.latest-sms{background:var(--color-surface-alt);padding:8px 12px;border-radius:8px;margin-bottom:12px}html.mdui-theme-layout-dark .latest-sms{background:#2a2a2a}.latest-sms .content{font-size:13px;line-height:1.5;word-break:break-all}.latest-sms .meta{font-size:11px;opacity:.75;margin-top:4px}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%;display:inline-block;vertical-align:bottom}.flex-inline{display:inline-flex;align-items:center;gap:4px}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:#00000040;border-radius:6px}html.mdui-theme-layout-dark ::-webkit-scrollbar-thumb{background:#ffffff40}.status-strip-card{max-width:var(--page-max-width);margin:calc(var(--appbar-height) + 4px) auto 4px;padding:4px 12px}@media (min-width:960px){.status-strip-card{margin-left:calc(var(--drawer-width) + 16px)}}.status-strip{display:flex;align-items:center;gap:8px;min-height:40px}.status-strip .strip-icon{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:6px;position:relative;font-size:22px;color:var(--color-text-secondary);transition:color .25s}.status-strip .strip-icon i{font-size:22px;line-height:1}.status-strip .strip-icon.mdui-color-orange{background:0 0!important;color:#ff9800!important}.status-strip .strip-icon.mdui-color-green{background:0 0!important;color:#4caf50!important}.status-strip .strip-icon.mdui-color-amber{background:0 0!important;color:#ffc107!important}.status-strip .strip-icon.gray{color:#bdbdbd}.status-strip .strip-icon.placeholder{visibility:hidden}.status-strip .strip-spacer{flex:1}.clock-pill{display:inline-flex;align-items:center;padding:4px 6px;background:var(--color-surface-alt);border-radius:999px;font-family:Consolas,monospace;font-size:14px;letter-spacing:1px}html.mdui-theme-layout-dark .clock-pill{background:#2a2a2a}.status-strip-card .material-icons{font-size:22px}</style></head><body class="mdui-loaded mdui-color-theme-indigo mdui-theme-primary-indigo mdui-theme-accent-teal"><header class="mdui-appbar mdui-appbar-fixed"><div class="mdui-toolbar mdui-color-indigo"><button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#drawer', swipe: true}"><i class="material-icons">menu</i></button> <span class="mdui-typo-title top-app-title">随身WiFi 控制台</span><div class="mdui-toolbar-spacer"></div><button id="themeToggle" class="mdui-btn mdui-btn-icon top-icon-btn" mdui-tooltip="{content: '明/暗/跟随系统'}"><i class="material-icons" id="themeIcon">brightness_4</i></button> <button type="button" class="mdui-btn mdui-btn-icon top-icon-btn" mdui-tooltip="{content: '完整配置'}" onclick='location.href="main.html"'><i class="material-icons">dashboard</i></button></div></header><div class="mdui-card status-strip-card" id="topStatusStrip"><div class="status-strip"><span class="strip-icon" id="iconSim" mdui-tooltip="{content: 'SIM'}"><i class="material-icons">sim_card</i></span> <span class="strip-icon" id="iconCell" mdui-tooltip="{content: '蜂窝网络'}"><i class="material-icons">signal_cellular_null</i></span> <span class="strip-icon" id="iconNet" mdui-tooltip="{content: '网络状态'}"><i class="material-icons">language</i></span> <span class="strip-icon" id="iconHotspot" mdui-tooltip="{content: '热点共享'}"><i class="material-icons">wifi_tethering</i></span> <span class="strip-icon" id="iconPower" mdui-tooltip="{content: '电源'}"><i class="material-icons">power_settings_new</i></span> <span class="strip-icon" id="iconSms" mdui-tooltip="{content: '短信'}" style="display:none"><i class="material-icons">sms</i></span><div class="strip-spacer"></div><div class="clock-pill"><i class="mdui-icon material-icons" style="margin-right:4px">access_time</i><span id="clockNow">--:--:--</span></div></div></div><div class="mdui-drawer mdui-drawer-close" id="drawer"><div class="mdui-list" style="padding-top:56px"><a href="#overview" class="mdui-list-item mdui-ripple"><i class="mdui-list-item-icon material-icons">lightbulb_outline</i><div class="mdui-list-item-content">概览</div></a><a href="#device-control" class="mdui-list-item mdui-ripple"><i class="mdui-list-item-icon material-icons">phonelink_setup</i><div class="mdui-list-item-content">设备控制</div></a><a href="#ap-config" class="mdui-list-item mdui-ripple"><i class="mdui-list-item-icon material-icons">wifi_tethering</i><div class="mdui-list-item-content">热点配置</div></a><a href="#phone-entry" class="mdui-list-item mdui-ripple"><i class="mdui-list-item-icon material-icons">sms</i><div class="mdui-list-item-content">短信/电话</div></a><a href="#device-info" class="mdui-list-item mdui-ripple"><i class="mdui-list-item-icon material-icons">memory</i><div class="mdui-list-item-content">设备信息</div></a><a href="#downloads" class="mdui-list-item mdui-ripple"><i class="mdui-list-item-icon material-icons">file_download</i><div class="mdui-list-item-content">工具下载</div></a><a href="main.html" class="mdui-list-item mdui-ripple" target="_blank"><i class="mdui-list-item-icon material-icons">tune</i><div class="mdui-list-item-content">完整配置页</div></a></div></div><main class="layout mdui-container"><div id="overview" class="section-grid"><div class="mdui-card"><div class="mdui-card-primary"><div class="mdui-card-primary-title">网络与信号</div><div class="mdui-card-primary-subtitle" id="netSubtitle">正在获取状态…</div></div><div class="mdui-card-content"><div class="flex space-between wrap"><div><div class="signal-bars" id="signalBars"></div><div class="signal-meta" id="signalMeta"></div></div><div style="min-width:120px"><div class="status-pill" id="connStatus"><i class="material-icons" style="font-size:16px">language</i><span id="connText">—</span></div><div class="mt8 rssi-badge" id="rssiBadge">RSSI: -- dBm</div><div class="mt8" id="networkTypeLabel">信号制式: —</div><div class="mt8" id="operatorLabel">运营商: —</div></div></div><div class="mt16 net-metrics" id="netMetrics"><div style="display:flex;flex-wrap:wrap;gap:16px;font-size:13px;line-height:1.4"><div>IP: <span id="ipAddr">—</span></div><div>上传: <span id="txBytes">—</span></div><div>下载: <span id="rxBytes">—</span></div><div>dBm: <span id="dbmValue">—</span></div><div>在线: <span id="clientNum">—</span></div></div></div><div class="mt16 mdui-typo-caption" id="lastUpdate">最后更新时间: —</div></div><div class="mdui-card-actions" style="display:flex;align-items:center;justify-content:flex-end;gap:16px"><button class="mdui-btn mdui-ripple" id="refreshSignal"><i class="material-icons mdui-icon-left">refresh</i>刷新</button> <label class="mdui-switch" mdui-tooltip="{content: '自动刷新信号'}"><input type="checkbox" id="autoRefresh" checked> <i class="mdui-switch-icon"></i></label><div style="flex:1"></div><label class="mdui-switch" id="connSwitchWrap" mdui-tooltip="{content: '蜂窝数据连接开关'}" style="margin-right:0"><input type="checkbox" id="connSwitch"> <i class="mdui-switch-icon"></i></label> <span id="connSwitchIcon" style="display:inline-flex;align-items:center;font-size:22px;color:#1976d2;margin-left:4px"><i class="mdui-icon material-icons" id="connIcon">signal_cellular_null</i></span></div></div><div class="mdui-card" id="device-control"><div class="mdui-card-primary"><div class="mdui-card-primary-title">设备控制</div><div class="mdui-card-primary-subtitle">常用维护与重启操作</div></div><div class="mdui-card-content action-btns"><button id="openUsbdbg" type="button" class="mdui-btn mdui-color-red mdui-ripple"><i class="material-icons mdui-icon-left">adb</i>USB 调试</button> <button id="openBootloader" type="button" class="mdui-btn mdui-color-deep-orange mdui-ripple"><i class="material-icons mdui-icon-left">restore</i>引导程序</button> <button id="rebootDirect" type="button" class="mdui-btn mdui-color-blue-grey mdui-ripple"><i class="material-icons mdui-icon-left">power_settings_new</i>重启设备</button></div><div class="mdui-card-content mdui-typo-caption">注意：某些操作会导致暂时断网，需要重新连接热点。</div></div><div class="mdui-card" id="ap-config"><div class="mdui-card-primary"><div class="mdui-card-primary-title">热点配置</div><div class="mdui-card-primary-subtitle">无线、APN、DHCP、过滤</div></div><div class="mdui-card-content"><div class="wifi-quick" id="wifiQuick"><div style="display:flex;align-items:center;justify-content:space-between;width:100%"><div style="display:flex;align-items:center;gap:12px"><div><i class="material-icons" style="font-size:18px;vertical-align:middle">wifi</i> <span>SSID:</span> <code id="wifiSsid">正在载入…</code></div><div><i class="material-icons" style="font-size:18px;vertical-align:middle">vpn_key</i> <span>密码:</span> <code id="wifiPwd" data-hidden="1">••••••••</code></div></div><div style="display:flex;align-items:center;gap:8px"><button id="togglePwd" class="mdui-btn mdui-btn-icon mini-icon-btn" mdui-tooltip="{content: '显示/隐藏密码'}"><i class="material-icons" id="pwdIcon">visibility</i></button> <button id="showQrcode" class="mdui-btn mdui-btn-icon mini-icon-btn" mdui-tooltip="{content: '扫码连接WiFi'}"><i class="material-icons">center_focus_weak</i></button></div></div></div><div class="chip-group"><a class="mdui-chip" href="main.html" target="_blank"><span class="mdui-chip-icon mdui-color-blue"><i class="material-icons">dashboard</i></span><span class="mdui-chip-title">全部设置</span></a> <a class="mdui-chip" href="wifiSetting.html" target="_blank"><span class="mdui-chip-icon mdui-color-teal"><i class="material-icons">wifi</i></span><span class="mdui-chip-title">SSID</span></a> <a class="mdui-chip" href="wifiSecurity.html" target="_blank"><span class="mdui-chip-icon mdui-color-orange"><i class="material-icons">lock</i></span><span class="mdui-chip-title">加密</span></a> <a class="mdui-chip" href="wwanConfig.html" target="_blank"><span class="mdui-chip-icon mdui-color-green"><i class="material-icons">settings_input_antenna</i></span><span class="mdui-chip-title">APN</span></a> <a class="mdui-chip" href="MacFilter.html" target="_blank"><span class="mdui-chip-icon mdui-color-pink"><i class="material-icons">block</i></span><span class="mdui-chip-title">MAC过滤</span></a> <a class="mdui-chip" href="D_HCP.html" target="_blank"><span class="mdui-chip-icon mdui-color-indigo"><i class="material-icons">dns</i></span><span class="mdui-chip-title">DHCP</span></a></div></div><div class="mdui-card-actions"><a class="mdui-btn mdui-ripple" href="modifyPwd.html" target="_blank"><i class="material-icons mdui-icon-left">lock_outline</i>修改管理密码</a> <a class="mdui-btn mdui-ripple" href="sim.html" target="_blank"><i class="material-icons mdui-icon-left">sim_card</i>SIM 信息</a></div></div><div class="mdui-card" id="phone-entry"><div class="mdui-card-primary"><div class="mdui-card-primary-title">手机功能</div><div class="mdui-card-primary-subtitle">短信、联系人、通话记录</div></div><div class="mdui-card-content"><div class="latest-sms" id="latestSmsBox"><div class="flex-inline" style="justify-content:space-between;width:100%"><div style="font-weight:500;font-size:13px;display:flex;align-items:center;gap:4px"><i class="material-icons" style="font-size:18px">sms</i> 最新短信</div><div><button id="refreshSms" class="mdui-btn mdui-btn-icon mini-icon-btn" mdui-tooltip="{content: '刷新最新短信'}"><i class="material-icons">refresh</i></button></div></div><div class="content" id="smsContent">加载中…</div><div class="meta" id="smsMeta"></div></div><div class="chip-group"><a class="mdui-chip dynamic-link" href="http://192.168.100.1:5000/" target="_blank"><span class="mdui-chip-icon mdui-color-blue"><i class="material-icons">open_in_browser</i></span><span class="mdui-chip-title">Web 客户端</span></a> <a class="mdui-chip dynamic-link" href="http://192.168.100.1:5000/#/sms" target="_blank"><span class="mdui-chip-icon mdui-color-teal"><i class="material-icons">sms</i></span><span class="mdui-chip-title">短信</span></a> <a class="mdui-chip dynamic-link" href="http://192.168.100.1:5000/#/contacts" target="_blank"><span class="mdui-chip-icon mdui-color-amber"><i class="material-icons">contacts</i></span><span class="mdui-chip-title">联系人</span></a> <a class="mdui-chip dynamic-link" href="http://192.168.100.1:5000/#/phone" target="_blank"><span class="mdui-chip-icon mdui-color-lime"><i class="material-icons">call_received</i></span><span class="mdui-chip-title">来电记录</span></a></div><div class="mdui-typo-caption mt16">首次使用可能需要登录认证。</div></div></div><div class="mdui-card" id="device-info"><div class="mdui-card-primary"><div class="mdui-card-primary-title">设备信息</div><div class="mdui-card-primary-subtitle">硬件、软件、板卡</div></div><div class="mdui-card-content"><table class="device-info-table"><tbody><tr><th>Android</th><td>4.4.4 KitKat (API 19)</td></tr><tr><th>Linux Kernel</th><td>3.0.28 #1 SMP PREEMPT Wed Jul 27 18:34:41 CST 2022</td></tr><tr><th>IMEI</th><td>在详情中查看</td></tr><tr><th>序列号</th><td>5b4c6f21</td></tr><tr><th>基带版本</th><td>N958St_Z85_CN_JSXPH1IDN1H213</td></tr><tr><th>处理器 CPU</th><td>Qualcomm Technologies, Inc MSM8916 Snapdragon 414</td></tr><tr><th>型号 Model</th><td>UZ801</td></tr><tr><th>软件版本</th><td>V3.1</td></tr><tr><th>主板版本</th><td>UZ801_V3.0 类纸盒蓝板</td></tr></tbody></table><div class="mt16"><a class="mdui-btn mdui-ripple open-dialog" href="deviceInformation.html"><i class="material-icons mdui-icon-left">info</i>更多详情</a></div></div></div><div class="mdui-card" id="downloads"><div class="mdui-card-primary"><div class="mdui-card-primary-title">工具下载</div><div class="mdui-card-primary-subtitle">ADB、ARDC、帮助文档</div></div><div class="mdui-card-content download-links"><div class="divider-title">ADB Platform Tools</div><div class="chip-group"><a class="mdui-chip" href="https://googledownloads.cn/android/repository/platform-tools-latest-windows.zip" target="_blank"><span class="mdui-chip-icon"><i class="material-icons">desktop_windows</i></span><span class="mdui-chip-title">Windows</span></a> <a class="mdui-chip" href="https://googledownloads.cn/android/repository/platform-tools-latest-darwin.zip" target="_blank"><span class="mdui-chip-icon"><i class="material-icons">desktop_mac</i></span><span class="mdui-chip-title">macOS</span></a> <a class="mdui-chip" href="https://googledownloads.cn/android/repository/platform-tools-latest-linux.zip" target="_blank"><span class="mdui-chip-icon"><i class="material-icons">laptop</i></span><span class="mdui-chip-title">Linux</span></a></div><div class="divider-title">远程控制</div><a class="mdui-chip" href="https://dlsoft.lanzoux.com/s/ardc" target="_blank"><span class="mdui-chip-icon"><i class="material-icons">screen_share</i></span><span class="mdui-chip-title">ARDC</span></a><div class="divider-title">文档 Manuals</div><div class="chip-group"><a class="mdui-chip" href="USER_Manual_en.pdf" target="_blank"><span class="mdui-chip-icon"><i class="material-icons">help_outline</i></span><span class="mdui-chip-title">Manual EN</span></a> <a class="mdui-chip" href="USER_Manual_zh.pdf" target="_blank"><span class="mdui-chip-icon"><i class="material-icons">help</i></span><span class="mdui-chip-title">使用手册</span></a></div></div></div></div><div class="hidden"><iframe id="legacyStatus" src="status.html" class="embed-preview" title="旧状态页面"></iframe></div></main><div class="footer"><div>版权所有 &copy; 史蒂夫ZMT工作室 页面版本 v4.0</div><div>Copyright &copy; SteveZMTstudios. All rights reserved.</div></div><div class="mdui-dialog" id="actionDialog"><div class="mdui-dialog-title" id="actionDialogTitle">操作确认</div><div class="mdui-dialog-content" style="padding:0;overflow:hidden"><iframe id="actionFrame" src="about:blank" style="border:0;width:100%;height:320px;background:0 0;display:block" allowtransparency="true"></iframe></div><div class="mdui-dialog-actions"><button class="mdui-btn mdui-ripple" mdui-dialog-cancel>取消</button></div></div><script src="js/mdui.min.js"></script><script src="js/plugins/jquery.js"></script><script src="js/plugins/jquerysession.js"></script><script src="js/utils/ajax.js"></script><script src="js/qrcode.min.js"></script><script>!function(){const t=window.location.host||"192.168.100.1";window.location.port;document.querySelectorAll("a").forEach(function(t){let e=t.getAttribute("href");if(e&&e.startsWith("http://192.168.100.1")){const n=window.location.hostname,o=e.match(/:([0-9]+)/),l=o?o[1]:"80",i=e.replace(/http:\/\/192\.168\.100\.1:[0-9]+/,"");t.href=`http://${n}:${l}${i}`}});const e=document.getElementById("signalBars"),n=document.getElementById("netSubtitle"),o=document.getElementById("signalMeta"),l=document.getElementById("connStatus"),i=document.getElementById("connText"),d=document.getElementById("rssiBadge"),a=document.getElementById("networkTypeLabel"),s=document.getElementById("operatorLabel"),c=document.getElementById("lastUpdate"),r=document.getElementById("refreshSignal"),m=document.getElementById("autoRefresh"),u=document.getElementById("themeToggle"),g=document.getElementById("themeIcon"),y=document.getElementById("rebootDirect"),f=document.getElementById("openUsbdbg"),h=document.getElementById("openBootloader"),b=document.getElementById("actionDialog"),x=document.getElementById("actionFrame"),p=document.getElementById("actionDialogTitle"),C=document.getElementById("wifiSsid"),I=document.getElementById("wifiPwd"),E=document.getElementById("togglePwd"),w=document.getElementById("pwdIcon"),_=document.getElementById("showQrcode"),v=document.getElementById("smsContent"),B=document.getElementById("smsMeta"),L=document.getElementById("refreshSms"),S=document.getElementById("ipAddr"),k=document.getElementById("txBytes"),T=document.getElementById("rxBytes"),N=document.getElementById("dbmValue"),A=document.getElementById("clientNum"),D=document.getElementById("connSwitch"),M=(document.getElementById("connSwitchIcon"),document.getElementById("connIcon")),P=document.getElementById("iconSim"),H=document.getElementById("iconCell"),q=document.getElementById("iconNet"),F=document.getElementById("iconHotspot"),W=document.getElementById("iconPower"),Q=document.getElementById("iconSms"),R=document.getElementById("clockNow");let U=null,j=null,z=null,K=!1;function O(){R&&(R.textContent=(new Date).toLocaleTimeString())}function J(t,e){if(!t)return;const n=t.querySelector("i.material-icons");n&&(n.textContent=e)}function V(t){t&&t.classList.remove("mdui-color-orange","mdui-color-green","mdui-color-amber","gray","placeholder")}function G(){if(V(P),U&&"—"!==U?"0"===Y&&!1===X?(J(P,"sim_card_alert"),P.classList.add("mdui-color-orange")):(J(P,"sim_card"),P.classList.add("mdui-color-green")):(J(P,"signal_cellular_no_sim"),P.classList.add("mdui-color-orange")),V(H),"1"===Y?(J(H,"signal_cellular_null"),H.classList.add("gray")):"0"===Y&&!0===X?(J(H,"signal_cellular_4_bar"),H.classList.add("mdui-color-green")):"0"===Y&&!1===X?(J(H,"signal_cellular_connected_no_internet_4_bar"),H.classList.add("mdui-color-orange")):(J(H,"signal_cellular_null"),H.classList.add("gray")),V(q),!0===X?(J(q,"settings_ethernet"),q.classList.add("mdui-color-green")):!1===X?(q.classList.add("mdui-color-orange"),J(q,"language")):(J(q,"language"),q.classList.add("gray")),V(F),"__FAIL__"===j?F.classList.add("placeholder"):j?(J(F,"wifi_tethering"),X?F.classList.add("mdui-color-green"):!1===X&&F.classList.add("mdui-color-orange")):F.classList.add("placeholder"),V(W),J(W,"power_settings_new"),Q)if(V(Q),K)Q.style.display="inline-flex",J(Q,"sms_failed"),Q.classList.add("mdui-color-orange");else if(z){Date.now()-z<=3e5?(Q.style.display="inline-flex",J(Q,"chat"),Q.classList.add("mdui-color-amber")):(Q.style.display="inline-flex",J(Q,"chat"))}else Q.style.display="none"}setInterval(O,1e3),O();let X=null,Y=null;const Z="mdui-theme-mode";function tt(t){[...e.children].forEach((e,n)=>{const o=n<t,l=e.querySelector("span");l.style.height=o?"100%":"0%",l.style.background=t<=2?"#ff9800":"#4caf50"})}function et(t){return new Promise((e,n)=>{try{request(t,function(t){e(t)})}catch(t){n(t)}})}!function(){e.innerHTML="";for(let t=0;t<5;t++){const n=document.createElement("div");n.className="signal-bar",n.style.height=14+6*t+"px";const o=document.createElement("span");o.style.height="0%",n.appendChild(o),e.appendChild(n)}}();try{if(window.$&&$.session){const t=$.session.get("conn_mode");"0"!==t&&"1"!==t||(Y=t)}}catch(t){}async function nt(){n.textContent="当前网络 正在获取…";try{const t=await et({funcNo:1001});if("1"!==t.flag)throw new Error(t.error_info||"接口返回失败");const e=t.results&&t.results[0]||{},r="number"==typeof e.rssi?e.rssi:"string"==typeof e.rssi?parseInt(e.rssi,10):null,m=e.netmode||"—",u=e.oper||"无服务",g=(e.netstatus||"").toLowerCase();tt("number"==typeof r?Math.max(0,Math.min(5,r)):0),d.textContent="信号强度 (RSSI): "+(null!==r?r:"--");const y="connected"===g||"已连接"===g;i.textContent=y?"已连接到 Internet 网络":"网络连接断开，请检查",l.style.background=y?"#66BB6A44":"#FF980044",l.style.color=y?"#00C853":"#f57f17",s.textContent="运营商: "+u,U=u&&"—"!==u?u:"",a.textContent="信号制式: "+m,o.innerHTML="网络: "+m+"<br/>运营商: "+u,n.textContent="当前网络 "+m,c.textContent="最后更新时间: "+(new Date).toLocaleTimeString(),X=y,ot(),G(),async function(){try{const[t,e,n]=await Promise.all([et({funcNo:1002}),et({funcNo:1003}),et({funcNo:1029})]);if("1"===t.flag){const e=t.results&&t.results[0]||{};e.IP?S.textContent=e.IP:e.wlan_ip?S.textContent=e.wlan_ip:S.textContent="—"}else S.textContent="失败";if("1"===e.flag){const t=e.results&&e.results[0]||{},n=parseInt(t.up_bytes,10),o=parseInt(t.down_bytes,10);isNaN(n)?k.textContent="—":k.textContent=n+" KB",isNaN(o)?T.textContent="—":T.textContent=o+" KB",void 0!==t.client_num&&void 0!==t.maxSta?A.textContent=t.client_num+"/"+t.maxSta:void 0!==t.client_num?A.textContent=t.client_num:A.textContent="—"}else k.textContent=T.textContent=A.textContent="失败";if("1"===n.flag){const t=n.results&&n.results[0]||{};void 0!==t.dbm?N.textContent=t.dbm:N.textContent="—"}else N.textContent="失败"}catch(t){S.textContent=k.textContent=T.textContent=N.textContent=A.textContent="错误"}}(),rt()}catch(t){n.textContent="状态获取失败，请稍后重试 (API failed)",o.textContent=t.message,tt(0),i.textContent="未知 Unknown",d.textContent="信号强度 (RSSI): --",X=null,ot(),G(),rt()}}function ot(){D&&(null===Y?(D.disabled=!0,D.checked=!1):(D.disabled=!1,D.checked="0"===Y),M&&("1"===Y?(M.textContent="signal_cellular_null",M.style.color="#bdbdbd"):!0===X?(M.textContent="signal_cellular_4_bar",M.style.color="#1976d2"):!1===X?(M.textContent="signal_cellular_connected_no_internet_4_bar",M.style.color="#ff9800"):(M.textContent="signal_cellular_null",M.style.color="#bdbdbd")))}null===Y&&(Y="0"),setTimeout(()=>ot(),0),window.getConnMode=()=>Y,window.getNetConnectionState=()=>X,D&&D.addEventListener("change",function(){if(!D)return;const t=D.checked,e=t?"0":"1",n=Y??(t?"1":"0");D.disabled=!0,Y=e,ot(),request({funcNo:1004,conn_mode:e},function(o){if(o&&"1"===o.flag){try{$.session&&$.session.set("conn_mode",e)}catch(t){}mdui.snackbar({message:t?"已切换为自动连接":"已切换为断开连接"}),setTimeout(()=>{nt()},500)}else Y=n,ot(),mdui.snackbar({message:"操作失败: "+(o&&o.error_info||"未知错误")});D.disabled=!1})}),r.addEventListener("click",nt);let lt=null;function it(){lt&&clearInterval(lt),lt=setInterval(nt,1e4)}function dt(t){document.documentElement.classList.remove("mdui-theme-layout-dark","mdui-theme-layout-auto"),"dark"===t&&document.documentElement.classList.add("mdui-theme-layout-dark"),g.textContent="dark"===t?"brightness_7":"brightness_4",localStorage.setItem(Z,t)}it(),m.addEventListener("change",()=>{m.checked?it():lt&&(clearInterval(lt),lt=null)});const at=window.matchMedia("(prefers-color-scheme: dark)");function dt(t){document.documentElement.classList.remove("mdui-theme-layout-dark"),document.documentElement.dataset.themeMode=t;let e=t;"auto"===t&&(e=at.matches?"dark":"light"),"dark"===e&&document.documentElement.classList.add("mdui-theme-layout-dark"),g.textContent="auto"===t?"brightness_auto":"dark"===e?"brightness_7":"brightness_4"}let st=localStorage.getItem(Z);function ct(t){let e="",n="操作确认";if("usbdbg"===t)e="confirm.html?url=usbdbg&embedded=1",n="USB 调试";else{if("rebootbl"!==t)return;e="confirm.html?url=rebootbl&embedded=1",n="引导加载程序模式"}p.textContent=n,x.src=e,new mdui.Dialog(b,{history:!1,modal:!0}).open()}async function rt(){try{const e={data:{type:1,page_num:1,page_size:1},timestamp:Date.now(),sign:""},n=await fetch(`http://${t}:5000/sms/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await n.json();if(200===o.code&&Array.isArray(o.data)&&o.data.length){const t=o.data[0];v.textContent=t.content||"(空)";const e=t.date?new Date(t.date).toLocaleString():"";B.textContent=`${t.number||""} ${e}`.trim(),t.date&&(z=new Date(t.date).getTime()),K=!1}else v.textContent="暂无短信",z=null,K=!1}catch(t){v.textContent="获取失败",B.textContent=String(t),K=!0}G()}st||(st="auto",localStorage.setItem(Z,"auto")),dt(st),at.addEventListener("change",()=>{"auto"===localStorage.getItem(Z)&&dt("auto")}),u.addEventListener("click",()=>{const t=localStorage.getItem(Z)||"auto",e="light"===t?"dark":"dark"===t?"auto":"light";localStorage.setItem(Z,e),dt(e),window.mdui&&mdui.snackbar({message:"主题: "+("auto"===e?"跟随系统":"dark"===e?"深色":"浅色")})}),r.innerHTML='<i class="material-icons mdui-icon-left">refresh</i>刷新',y&&y.addEventListener("click",()=>{mdui.dialog({title:"确认重启",content:"设备将断开网络并在约 60~80 秒后恢复，确定继续？",buttons:[{text:"取消"},{text:"确定",onClick:()=>{request({funcNo:1013},function(t){t&&"1"===t.flag?mdui.snackbar({message:"重启指令已发送，设备即将重启"}):mdui.snackbar({message:"重启失败: "+(t&&t.error_info||"未知错误")})});const t=document.createElement("div");t.className="mdui-dialog",t.innerHTML='<div class="mdui-dialog-content" style="text-align:center;padding:16px 0;"><div class="mdui-spinner" style="margin:10px auto;"></div><div id="rebootWaitText" >正在重启，请等待...</div></div>',document.body.appendChild(t);new mdui.Dialog(t,{modal:!0,history:!1}).open(),t.querySelectorAll("[mdui-dialog-close],[mdui-dialog-cancel]").forEach(t=>t.style.display="none"),mdui.mutation(),setTimeout(()=>{let e=!0,n=t.querySelector("#rebootWaitText");!function t(){e&&fetch("status.html",{cache:"no-store"}).then(o=>{o.ok?(e=!1,n&&(n.textContent="服务已启动，正在重新载入..."),setTimeout(()=>{location.reload()},1200)):setTimeout(t,3e3)}).catch(()=>{setTimeout(t,3e3)})}()},1e4)}}]})}),f&&f.addEventListener("click",()=>ct("usbdbg")),h&&h.addEventListener("click",()=>ct("rebootbl")),E?.addEventListener("click",()=>{if("1"===I.getAttribute("data-hidden"))I.setAttribute("data-hidden","0"),I.textContent=I.dataset.real||"",w.textContent="visibility_off";else{I.setAttribute("data-hidden","1");const t=I.dataset.real||"";I.textContent="•".repeat(Math.min(8,t.length)),w.textContent="visibility"}}),_?.addEventListener("click",()=>{const t=C.textContent||"",e=I.dataset.real||"",n=`WIFI:T:WPA;S:${t};P:${e};;`,o=document.createElement("div");o.className="mdui-dialog",o.style.maxWidth="340px",o.style.minHeight="420px",o.innerHTML=`<div class="mdui-dialog-title">扫码连接WiFi</div><div class="mdui-dialog-content" style="text-align:center;padding:24px 0 12px 0;overflow:visible;"><div id="wifiQrcode" style="display:inline-block;"></div><div style="margin-top:12px;font-size:13px;word-break:break-all;">SSID: <b>${t}</b><br>密码: <b>${e}</b></div></div><div class="mdui-dialog-actions" style="overflow:visible;"><button class="mdui-btn mdui-ripple" mdui-dialog-close>关闭</button></div>`,document.body.appendChild(o),setTimeout(()=>{new QRCode(document.getElementById("wifiQrcode"),{text:n,width:180,height:180,colorDark:"#212121",colorLight:"#fff",correctLevel:QRCode.CorrectLevel.H});const t=o.querySelector(".mdui-dialog-content"),e=o.querySelector(".mdui-dialog-actions"),l=o.querySelector(".mdui-dialog-title");let i=0;l&&(i+=l.offsetHeight),t&&(i+=t.offsetHeight),e&&(i+=e.offsetHeight),o.style.minHeight=i+32+"px"},120);new mdui.Dialog(o,{history:!1,modal:!0}).open(),o.addEventListener("closed.mdui.dialog",()=>{o.remove()})}),L?.addEventListener("click",()=>{rt().then(()=>{mdui.snackbar({message:"短信已刷新"})})}),async function(){C.textContent="…",I.textContent="…";try{const[t,e]=await Promise.all([et({funcNo:1006}),et({funcNo:1009})]);if("1"!==t.flag)throw new Error(t.error_info||"1006失败");if("1"!==e.flag)throw new Error(e.error_info||"1009失败");const n=t.results&&t.results[0]&&t.results[0].ssid||"未知",o=e.results&&e.results[0]&&e.results[0].pwd||"未设置";C.textContent=n,I.dataset.real=o,j=n&&"未知"!==n?n:"","1"===I.getAttribute("data-hidden")?I.textContent="•".repeat(Math.min(8,o.length)):I.textContent=o,G()}catch(t){C.textContent="失败",I.textContent="失败",j="__FAIL__",G()}}(),rt(),nt(),function(){const t={"wifiSetting.html":"WIFI SSID 设置","wifiSecurity.html":"WIFI 加密设置","wwanConfig.html":"APN 配置","D_HCP.html":"DHCP 设置","MacFilter.html":"MAC 过滤","modifyPwd.html":"修改管理密码","sim.html":"SIM 信息","deviceInformation.html":"设备详细信息"};document.querySelectorAll("#ap-config a.mdui-chip, #ap-config .mdui-card-actions a.mdui-btn, a.open-dialog").forEach(e=>{const n=e.getAttribute("href");n&&"main.html"!==n&&e.addEventListener("click",e=>{e.preventDefault(),p.textContent=t[n]||"功能",x.src=n+(n.includes("?")?"&":"?")+"embedded=1",new mdui.Dialog(b,{history:!1,modal:!0}).open()})})}()}();</script></body></html>